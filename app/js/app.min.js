angular.module("equipmentsApp.controllers",["ngResource","appMaps"]).controller("equipmentsController",function(a,b){function c(){navigator.geolocation?navigator.geolocation.getCurrentPosition(d):$("body").append("Geolocation is not supported by this browser.")}function d(b){currentLat=b.coords.latitude,currentLon=b.coords.longitude,e.get({path:"token=ec8492667356ee806e5de5d0d322a51708b094a75abf07b0024edfa09ca25aa1&cid=27,29&offset=0&limit=10&lat="+currentLat+"&lon="+currentLon+"&radius=2000"},function(b){a.equipments=b.data,angular.forEach(a.equipments,function(a,b){setTimeout(function(){var b=a.id;f.get({path:"token=ec8492667356ee806e5de5d0d322a51708b094a75abf07b0024edfa09ca25aa1&id="+b},function(b){a.latitude=b.data[0].lat,a.longitude=b.data[0].lon})},200*b)})})}var e=b("https://api.paris.fr/api/data/1.1/Equipements/get_geo_equipements/?:path",{path:"@path"}),f=b("https://api.paris.fr/api/data/1.0/Equipements/get_equipement/?:path",{path:"@path"});c()}),angular.module("appMaps",["uiGmapgoogle-maps"]).controller("mapCtrl",function(a,b,c){function d(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e):$("body").append("Geolocation is not supported by this browser.")}function e(b){currentLat=b.coords.latitude,currentLon=b.coords.longitude,a.map={center:{latitude:currentLat,longitude:currentLon},zoom:15}}a.favoritesMarkers=[],d();var f=[];a.$watch(function(){return c.getFavorites()},function(){console.log("Y'a du changement"),f=[];for(var b=0;b<c.getFavorites().length;b++)f.push({id:b+1,latitude:c.getFavorites()[b].latitude,longitude:c.getFavorites()[b].longitude,name:c.getFavorites()[b].name});a.favoritesMarkers=f},!0)}),angular.module("equipmentsApp",["equipmentsApp.controllers","favoriteFilter","uiGmapgoogle-maps","appMaps"]),angular.module("favoriteFilter",[]).filter("favorite",function(a){return function(b){var c,d=[];for(c=0;c<b.length;c++)b[c].checked&&d.push(b[c]);return a.setFavorites(d),d}}),angular.module("equipmentsApp").service("getCurrentLocation",[function(){function a(){navigator.geolocation?navigator.geolocation.getCurrentPosition(b):$("body").append("Geolocation is not supported by this browser.")}function b(a){c=a.coords.latitude,d=a.coords.longitude}var c=0,d=0;this.getCurrentLat=function(){return a(),console.log("currentLat dans getCurrentLat dans service avant return : "+c),c}}]),angular.module("equipmentsApp").service("favoritesManager",[function(){var a=[];this.getFavorites=function(){return a},this.setFavorites=function(b){a=b},this.pushFavorites=function(b){a.push(b)}}]);